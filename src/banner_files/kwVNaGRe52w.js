;/*FB_PKG_DELIM*/

__d("SecuredActionChallengeCDSPasswordDialogQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="6074231989279806"}),null);
__d("SecuredActionChallengeCDSPasswordDialogQuery$Parameters",["SecuredActionChallengeCDSPasswordDialogQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("SecuredActionChallengeCDSPasswordDialogQuery_facebookRelayOperation"),metadata:{},name:"SecuredActionChallengeCDSPasswordDialogQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("SecuredActionChallengePasswordDialogQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="6214776345265701"}),null);
__d("SecuredActionChallengePasswordDialogQuery$Parameters",["SecuredActionChallengePasswordDialogQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("SecuredActionChallengePasswordDialogQuery_facebookRelayOperation"),metadata:{},name:"SecuredActionChallengePasswordDialogQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("SecuredActionNoChallengeAvailableCDSDialogQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="8634127416659293"}),null);
__d("SecuredActionNoChallengeAvailableCDSDialogQuery$Parameters",["SecuredActionNoChallengeAvailableCDSDialogQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("SecuredActionNoChallengeAvailableCDSDialogQuery_facebookRelayOperation"),metadata:{},name:"SecuredActionNoChallengeAvailableCDSDialogQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("SecuredActionDialogRootQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="6130667596976647"}),null);
__d("SecuredActionDialogRootQuery$Parameters",["SecuredActionDialogRootQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("SecuredActionDialogRootQuery_facebookRelayOperation"),metadata:{},name:"SecuredActionDialogRootQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("UFI2TypingIndicatorImpl_feedback.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UFI2TypingIndicatorImpl_feedback",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,concreteType:"FeedbackTypersConnection",kind:"LinkedField",name:"feedback_typers",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"other_count",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"subscription_target_id",storageKey:null}],type:"Feedback",abstractKey:null};e.exports=a}),null);
__d("UFI2TypingIndicator_feedback.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[{kind:"RootArgument",name:"feedbackSource"}],kind:"Fragment",metadata:null,name:"UFI2TypingIndicator_feedback",selections:[{alias:null,args:[{kind:"Variable",name:"feedback_source_integer",variableName:"feedbackSource"}],kind:"ScalarField",name:"is_eligible_for_real_time_updates",storageKey:null},{args:null,kind:"FragmentSpread",name:"UFI2TypingIndicatorImpl_feedback"}],type:"Feedback",abstractKey:null};e.exports=a}),null);
__d("UFI2TypingSubscription_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="5600593223301846"}),null);
__d("UFI2TypingSubscription.graphql",["UFI2TypingSubscription_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],c=[{kind:"Variable",name:"data",variableName:"input"}],d=[{alias:null,args:null,concreteType:"Feedback",kind:"LinkedField",name:"feedback",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"UFI2TypingIndicatorImpl_feedback"}],storageKey:null}],e=[{alias:null,args:null,concreteType:"Feedback",kind:"LinkedField",name:"feedback",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,concreteType:"FeedbackTypersConnection",kind:"LinkedField",name:"feedback_typers",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"other_count",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"subscription_target_id",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"UFI2TypingSubscription",selections:[{alias:null,args:c,concreteType:null,kind:"LinkedField",name:"feedback_typing_subscribe",plural:!1,selections:[{kind:"InlineFragment",selections:d,type:"FeedbackStartTypingResponsePayload",abstractKey:null},{kind:"InlineFragment",selections:d,type:"FeedbackStopTypingResponsePayload",abstractKey:null}],storageKey:null}],type:"Subscription",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"UFI2TypingSubscription",selections:[{alias:null,args:c,concreteType:null,kind:"LinkedField",name:"feedback_typing_subscribe",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:e,type:"FeedbackStartTypingResponsePayload",abstractKey:null},{kind:"InlineFragment",selections:e,type:"FeedbackStopTypingResponsePayload",abstractKey:null}],storageKey:null}]},params:{id:b("UFI2TypingSubscription_facebookRelayOperation"),metadata:{subscriptionName:"feedback_typing_subscribe"},name:"UFI2TypingSubscription",operationKind:"subscription",text:null}}}();e.exports=a}),null);
__d("CometRelayEnvironment",["CometRelayEnvironmentFactory"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=d("CometRelayEnvironmentFactory").CometRelayEnvironmentFactory.defaultEnvironment}),98);
__d("useFullViewImpression",["react","useVisibilityObserver"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useCallback,i=b.useRef;function a(a){var b=a.onFullViewStart,d=i({bottomRight:!1,hasBeenFullyViewed:!1,topLeft:!1});a=h(function(a){var c=a.entry;a=a.isElementVisible;if(!a&&d.current.hasBeenFullyViewed)d.current={bottomRight:!1,hasBeenFullyViewed:!1,topLeft:!1};else if(a&&!d.current.hasBeenFullyViewed){c.intersectionRatio===1?(d.current.bottomRight=!0,d.current.topLeft=!0):(d.current.bottomRight||(d.current.bottomRight=c.boundingClientRect.bottom<=c.rootBounds.bottom&&c.boundingClientRect.right<=c.rootBounds.right),d.current.topLeft||(d.current.topLeft=c.boundingClientRect.top>=c.rootBounds.top&&c.boundingClientRect.left>=c.rootBounds.left));if(d.current.bottomRight&&d.current.topLeft){d.current.hasBeenFullyViewed=!0;return b({currentTime:Date.now()})}}},[b]);var e=h(function(a){a.hiddenTime,a.visibleDuration,a.visibleTime,d.current={bottomRight:!1,hasBeenFullyViewed:!1,topLeft:!1}},[]);return c("useVisibilityObserver")({onHidden:e,onIntersection:a,options:{thresholdOverride:"EXPENSIVE"}})}g["default"]=a}),98);
__d("CometRelayEnvironmentProvider",["CometRelay","CometRelayEnvironment","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){return h.jsx(d("CometRelay").RelayEnvironmentProvider,{environment:a.environment||c("CometRelayEnvironment"),children:a.children})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("SecuredActionChallengeCDSPasswordDialog.entrypoint",["JSResourceForInteraction","SecuredActionChallengeCDSPasswordDialogQuery$Parameters"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(){return{queries:{query:{options:{fetchPolicy:"store-and-network"},parameters:c("SecuredActionChallengeCDSPasswordDialogQuery$Parameters"),variables:{}}}}},root:c("JSResourceForInteraction")("SecuredActionChallengeCDSPasswordDialog.react").__setRef("SecuredActionChallengeCDSPasswordDialog.entrypoint")};g["default"]=a}),98);
__d("SecuredActionChallengePasswordDialog.entrypoint",["JSResourceForInteraction","SecuredActionChallengePasswordDialogQuery$Parameters"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(){return{queries:{query:{options:{fetchPolicy:"store-and-network"},parameters:c("SecuredActionChallengePasswordDialogQuery$Parameters"),variables:{height:60,scale:1,width:60}}}}},root:c("JSResourceForInteraction")("SecuredActionChallengePasswordDialog.react").__setRef("SecuredActionChallengePasswordDialog.entrypoint")};g["default"]=a}),98);
__d("SecuredActionDialogRoot.entrypoint",["JSResourceForInteraction","SecuredActionDialogRootQuery$Parameters"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(a){return{queries:{query:{parameters:c("SecuredActionDialogRootQuery$Parameters"),variables:{encryptedContext:a.encryptedContext}}}}},root:c("JSResourceForInteraction")("SecuredActionDialogRoot.react").__setRef("SecuredActionDialogRoot.entrypoint")};g["default"]=a}),98);
__d("SecuredActionNoChallengeAvailableCDSDialog.entrypoint",["JSResourceForInteraction","SecuredActionNoChallengeAvailableCDSDialogQuery$Parameters"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(){return{queries:{query:{options:{fetchPolicy:"store-and-network"},parameters:c("SecuredActionNoChallengeAvailableCDSDialogQuery$Parameters"),variables:{}}}}},root:c("JSResourceForInteraction")("SecuredActionNoChallengeAvailableCDSDialog.react").__setRef("SecuredActionNoChallengeAvailableCDSDialog.entrypoint")};g["default"]=a}),98);
__d("CometRouteURL",["ConstUriUtils","absoluteToRelative","memoizeStringOnly","useCurrentRoute"],(function(a,b,c,d,e,f,g){"use strict";var h=c("memoizeStringOnly")(function(a){a=d("ConstUriUtils").getUri(a);return a!=null?a.getPath():null}),i=c("memoizeStringOnly")(function(a){a=d("ConstUriUtils").getUri(a);return a!=null?Object.fromEntries(a.getQueryParams()):null});function j(){var a;if(window.location.href==null)return null;a=(a=d("ConstUriUtils").getUri(window.location.href))==null?void 0:a.toString();return a!=null?c("absoluteToRelative")(a):null}function a(){var a=j();return a!=null?i(a):null}function k(){var a=c("useCurrentRoute")();if(a!=null){var b;return(b=a.canonicalUrl)!=null?b:a.url}else{return(b=j())!=null?b:""}}function b(){var a=k();return(a=h(a))!=null?a:""}function e(){var a=k();return(a=i(a))!=null?a:{}}g.getWindowURL=j;g.getWindowURLParams=a;g.useRouteURL=k;g.useRouteURLPath=b;g.useRouteURLParams=e}),98);
__d("SecuredActionTriggerWithAccountID.react",["CometRouteURL","react","useCometEntryPointDialog"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useEffect,i=b.useRef;function a(a){var b=a.accountID,e=a.entrypoint,f=a.onExit,g=a.onSuccess;a=d("CometRouteURL").useRouteURL();e=c("useCometEntryPointDialog")(e,{return_uri:a});var j=e[0],k=i(!0);h(function(){k.current&&j({accountID:b,onExit:f,onSuccess:g}),k.current=!1},[j,b,f,g])}g["default"]=a}),98);
__d("SecuredActionTriggerWithEncryptedContext.react",["react","useCometEntryPointDialog"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useEffect,i=b.useRef;function a(a){var b=a.encryptedContext,d=a.entrypoint,e=a.onExit,f=a.onSuccess;a=c("useCometEntryPointDialog")(d,{encryptedContext:b});var g=a[0],j=i(!0);h(function(){j.current&&g({encryptedContext:b,onExit:e,onSuccess:f}),j.current=!1},[g,b,e,f])}g["default"]=a}),98);
__d("SecuredActionUtils",[],(function(a,b,c,d,e,f){"use strict";var g="Re-authentication canceled.";function a(a){return(a==null?void 0:a.message)===g}f.SECURED_ACTION_REAUTH_CANCELED_ERROR=g;f.isSecuredActionError=a}),66);
__d("handleCometReauthenticationSideEffects",["errorCode","CometErrorOverlay","CometRelayEnvironmentProvider","CometTransientDialogProvider.react","FBLogger","OutsideExceptionKeyCommandListener.react","SecuredActionChallengeCDSPasswordDialog.entrypoint","SecuredActionChallengePasswordDialog.entrypoint","SecuredActionDialogRoot.entrypoint","SecuredActionNoChallengeAvailableCDSDialog.entrypoint","SecuredActionTriggerWithAccountID.react","SecuredActionTriggerWithEncryptedContext.react","SecuredActionUtils","cr:5888","err","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j={no_challenge_available:{CDS:c("SecuredActionNoChallengeAvailableCDSDialog.entrypoint"),"default":c("SecuredActionNoChallengeAvailableCDSDialog.entrypoint")},password:{CDS:c("SecuredActionChallengeCDSPasswordDialog.entrypoint"),"default":c("SecuredActionChallengePasswordDialog.entrypoint")}},k=new Set(),l=new Set();function m(){var a=c("err")(d("SecuredActionUtils").SECURED_ACTION_REAUTH_CANCELED_ERROR);a.type="info";for(var b=l,e=Array.isArray(b),f=0,b=e?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=b.length)break;g=b[f++]}else{f=b.next();if(f.done)break;g=f.value}g=g;g=g.onError;g(a)}}function n(){for(var a=l,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;d=d.onSuccess;d()}}function o(){var a;return(a=document.location.href)==null?void 0:a.includes("accountscenter")}function p(a){return o()?a.CDS||a["default"]:a["default"]}function q(a){try{return JSON.parse(a)}catch(a){a instanceof Error&&c("FBLogger")("secured_action").catching(a)}return{account_id:"",challenge_type:"password"}}function a(a,d,e){var f,g=a==null?void 0:a.source,h=(f=(f=g==null?void 0:g.errorCode)!=null?f:g==null?void 0:g.code)!=null?f:g==null?void 0:g.error;if(h!==2136001&&h!==3490037)return!1;l.add({onError:e,onSuccess:d});if(k.has(h))return!0;k.add(h);f=function(){k["delete"](h),l.clear()};e=b("cr:5888")==null?void 0:b("cr:5888")({error:a,onCleanup:f,onError:m,onSuccess:n});if(e===!0)return!0;try{a=q((d=g==null?void 0:g.description)!=null?d:"");f=a.challenge_type;f==="2fac"?s(h,a):r(h,a)}catch(a){k["delete"](h);if(a instanceof Error)throw c("FBLogger")("secured_action").mustfixThrow("Something when wrong while triggering the dialog: %s",a.message);return!1}return!0}function r(a,b){d("CometErrorOverlay").injectComponent(function(d){var e=function(){k["delete"](a),l.clear(),d()},f=function(){m(),e()},g=function(){n(),e()},h=b.challenge_type;if(!(h in j)){f();throw c("FBLogger")("secured_action").mustfixThrow("unsuported challenge type")}return i.jsx(c("CometRelayEnvironmentProvider"),{children:i.jsx(c("OutsideExceptionKeyCommandListener.react"),{children:i.jsx(c("CometTransientDialogProvider.react"),{children:i.jsx(c("SecuredActionTriggerWithAccountID.react"),{accountID:b.account_id,entrypoint:p(j[h]),onExit:f,onSuccess:g})})})})})}function s(a,b){d("CometErrorOverlay").injectComponent(function(d){var e=function(){k["delete"](a),l.clear(),d()},f=function(){m(),e()},g=function(){n(),e()},h=b.encrypted_context;if(h===void 0){f();throw c("FBLogger")("secured_action").mustfixThrow("two_factor challenge was thrown without a context")}return i.jsx(c("CometRelayEnvironmentProvider"),{children:i.jsx(c("OutsideExceptionKeyCommandListener.react"),{children:i.jsx(c("CometTransientDialogProvider.react"),{children:i.jsx(c("SecuredActionTriggerWithEncryptedContext.react"),{encryptedContext:h,entrypoint:c("SecuredActionDialogRoot.entrypoint"),onExit:f,onSuccess:g})})})})})}g["default"]=a}),98);
__d("TabBar",["ArbiterMixin","ReactDOMComet","mixin"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(c,e,f){var g;g=a.call(this)||this;e.props=babelHelpers["extends"]({},e.props,{onTabClick:function(a){return g.inform(b.TAB_CLICK,a)}});f=d("ReactDOMComet").createRoot(f);f.render(c(e));return g}return b}(c("mixin")(c("ArbiterMixin")));a.TAB_CLICK="onTabClick";g["default"]=a}),98);
__d("MercuryTypingAnimation_DEPRECATED.react",["cx","joinClasses","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var d=b.prototype;d.render=function(){return i.jsx("div",{className:c("joinClasses")("_4a0v _1x3z",this.props.className),children:i.jsxs("div",{className:"_4b0g",children:[i.jsx("div",{className:"_5pd7"}),i.jsx("div",{className:"_5pd7"}),i.jsx("div",{className:"_5pd7"})]})})};return b}(i.PureComponent);g["default"]=a}),98);
__d("FeedStoryCategory",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:0,ORGANIC:1,ENGAGEMENT:2,FIXED_POSITION:3,PROMOTION:4,SPONSORED:5,END_OF_FEED_CONTENT:6,FB_STORIES:7,HIGH_VALUE_PROMOTION:8,FB_STORIES_ENGAGEMENT:9,SHOWCASE:10,FB_SHORTS:11,TRENDING:12,ENGAGEMENT_QP:13,MULTI_FB_STORIES_TRAY:14});f["default"]=a}),66);
__d("AdAllocationIntegrityGapsInfo",["FeedStoryCategory"],(function(a,b,c,d,e,f,g){a=function(){function a(a){this.story_category=a,this.dist_to_top=-1,this.dist_to_fixed=-1,this.dist_to_promo=-1,this.dist_to_sponsored=-1,this.dist_to_engagement=-1}var b=a.prototype;b.setDistToTop=function(a){this.dist_to_top=a};b.setDistIfAbsent=function(a,b){if(b<0||a===c("FeedStoryCategory").UNKNOWN||a===c("FeedStoryCategory").ORGANIC)return;switch(a){case c("FeedStoryCategory").ENGAGEMENT:this.dist_to_engagement=this.$1(b,this.dist_to_engagement);break;case c("FeedStoryCategory").FIXED_POSITION:this.dist_to_fixed=this.$1(b,this.dist_to_fixed);break;case c("FeedStoryCategory").PROMOTION:this.dist_to_promo=this.$1(b,this.dist_to_promo);break;case c("FeedStoryCategory").SPONSORED:this.dist_to_sponsored=this.$1(b,this.dist_to_sponsored);break}};b.$1=function(a,b){return b===-1?a:b};return a}();g["default"]=a}),98);
__d("AdAllocationIntegrityUtils",["DataAttributeUtils","FeedStoryCategory","collectDataAttributes"],(function(a,b,c,d,e,f,g){"use strict";var h="data-story_category",i="data-dedupekey",j="ft";function a(a){var b=c("collectDataAttributes")(a,[j]).ft;a=c("DataAttributeUtils").getDataAttribute(a,h);if(a)switch(a){case"2":return c("FeedStoryCategory").ENGAGEMENT;case"3":return c("FeedStoryCategory").FIXED_POSITION;case"4":return c("FeedStoryCategory").PROMOTION;default:return c("FeedStoryCategory").UNKNOWN}else if(b.ei)return c("FeedStoryCategory").SPONSORED;else return c("FeedStoryCategory").ORGANIC}function b(a){if(a===c("FeedStoryCategory").SPONSORED||a===c("FeedStoryCategory").ENGAGEMENT||a===c("FeedStoryCategory").FIXED_POSITION||a===c("FeedStoryCategory").PROMOTION)return!0;else return!1}function d(a){return c("DataAttributeUtils").getDataAttribute(a,i)}g.getFeedStoryCategory=a;g.isGapRuleCategory=b;g.getDedupKey=d}),98);
__d("WwwVpvFeedTrackingFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1841521");b=d("FalcoLoggerInternal").create("www_vpv_feed_tracking",a);e=b;g["default"]=e}),98);
__d("viewportTrackingBuilder",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=null;return{factory:a,singleton:function(){b||(b=a.apply(void 0,arguments));return b},clearSingleton:function(){b=null}}}f["default"]=a}),66);
__d("ViewportTracking",["cx","invariant","AdAllocationIntegrityGapsInfo","AdAllocationIntegrityUtils","Arbiter","CSS","DOM","DOMDimensions","Event","LitestandMessages","NavigationMessage","Run","SubscriptionsHandler","TimeSlice","UserActivity","ViewportTrackingHelper","WebSession","WwwVpvFeedTrackingFalcoEvent","clearTimeout","clickRefAction","collectDataAttributes","debounce","getElementPosition","getViewportDimensions","pageID","setTimeout","throttle","viewportTrackingBuilder"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=97,k="vpv",l=3,m=2,n=1,o=0,p=1,q=2,r=3,s=4,t=43,u=function(){function a(a){this.cachedAllStories=[],this.vpvdAnalysis=!1,this.vpvdDebug=!1,this.vpvDebug=!1,this.fireTimer=this.fireTimer.bind(this),this.markStoryRead=this.markStoryRead.bind(this),this.behavior=a}var b=a.prototype;b.init=function(a){var b=this;this.useBanzai=!0;this.vpvDebug=!!a.vpv_debug;this.vpvdDebug=!!a.vpvd_debug;this.vpvdAnalysis=!!a.vpvd_analysis;this.ctaLoggingEnabled=!!a.cta_logging_enabled;this.adAllocationIntegrityLoggingEnabled=!!a.ad_allocation_integrity_logging_enabled;this.readStoryIDs={};this.storyIDsWasInView={};this.minFractionToBeVisibleForTimetracking=.5;this.scrollThrottlingInterval=100;this.mouseThrottlingInterval=100;this.keyboardThrottlingInterval=100;this.userActivityPollingInterval=5e3;this.timeToBeConsideredInactive=15e3;this.minTimeToReportImmediately=500;this.discardVPVDIntervalThreshold=9e4;this.active_state_duration=1e3;this.height_diff_to_change_state=25;this.focused_state_duration=3500;this.minSizeToBeVisible=200;this.invalidateAllStoriesCache();this.cachedViewportHeight=c("getViewportDimensions")().height;this.isTimetrackingEnabled=!1;this.activeStories={};this.userInactiveLock=!1;this.userActivityPollerTimeoutID=null;this._headLoadStoryCount=0;this.behavior.getDataFromConfig&&this.behavior.getDataFromConfig(a,this);this.isTimetrackingEnabled&&(this.lastMouseX=-1,this.lastMouseY=-1,this.lastStreamY=-1,this.latestStreamYChangedTimeStamp=-1,this.userFocus=q,this.latestUserFocus=q,this.latestUserActivity="init",this.focusedStory=null,this.latestFocusedStory=null,this.latestActiveStory=null,this.totalVPVDuration={});a.tracking_duration_config&&(this.scrollThrottlingInterval=a.tracking_duration_config.scroll_throttling_interval,this.mouseThrottlingInterval=a.tracking_duration_config.mouse_throttling_interval,this.keyboardThrottlingInterval=a.tracking_duration_config.keyboardThrottlingInterval,this.userActivityPollingInterval=a.tracking_duration_config.user_activity_polling_interval,this.timeToBeConsideredInactive=a.tracking_duration_config.time_to_be_considered_inactive,this.minSizeToBeVisible=a.tracking_duration_config.min_height_to_be_visible,this.minFractionToBeVisibleForTimetracking=a.tracking_duration_config.min_fraction_to_be_visible,this.minTimeToReportImmediately=a.tracking_duration_config.min_time_to_report_immediately,this.active_state_duration=a.tracking_duration_config.active_state_duration,this.height_diff_to_change_state=a.tracking_duration_config.story_height_diff_to_change_state,this.focused_state_duration=a.tracking_duration_config.focused_state_duration,this.discardVPVDIntervalThreshold=a.tracking_duration_config.discard_vpvd_interval_threshold);a.record_delay!==void 0||i(0,1115);var e=c("debounce")(this.fireTimer,a.record_delay,this);this.initialStories=this.getStoriesInView();this.initialStoriesLogged=!1;this.subscriptions=new(c("SubscriptionsHandler"))();this.subscriptions.addSubscriptions(this._getScrollListener(e),c("Event").listen(window,"resize",function(){b.cachedViewportHeight=c("getViewportDimensions")().height,e()}),c("Event").listen(window,"focus",function(){b.isTimetrackingEnabled&&b.updateTimeTrackingData(!1,"window_focus")}),c("Event").listen(window,"blur",function(){b.isTimetrackingEnabled&&b.updateTimeTrackingData(!0,"window_blur")}),c("Arbiter").subscribe(c("NavigationMessage").NAVIGATION_BEGIN,this.cleanup.bind(this)),c("Arbiter").subscribe("Stream/totalHeadLoadedStories",function(a,c){b._headLoadStoryCount=c.count}),c("Arbiter").subscribe(c("LitestandMessages").STORIES_INSERTED,function(){b.initialStoriesLogged&&e(),b.isTimetrackingEnabled&&b.updateTimeTrackingData(!1,"stories_inserted")}));if(this.isTimetrackingEnabled&&this.behavior.getStream){this.updateTimeTrackingData(!1,"init");a=c("throttle")(function(a){b.handleScroll(a)},this.scrollThrottlingInterval);var f=c("throttle")(function(a){return b.handleKeyboard(a)},this.keyboardThrottlingInterval),g=c("throttle")(function(a){return b.handleMouse(a)},this.mouseThrottlingInterval);this.subscriptions.addSubscriptions(c("Event").listen(window,"scroll",a),c("Event").listen(document.documentElement,"DOMMouseScroll",a,void 0,{passive:!0}),c("Event").listen(document.documentElement,"mousewheel",a,void 0,{passive:!0}),c("Event").listen(document.documentElement,"keydown",f),c("Event").listen(document.documentElement,"mouseover",g),c("Event").listen(document.documentElement,"mousemove",g),c("Event").listen(document.documentElement,"click",function(a){b.handleMouse(a)}),c("Arbiter").subscribe("Event/stop",function(a,c){b.handleMouse(c.event)}),c("Arbiter").subscribe("PhotoSnowlift.OPEN",function(){b.userFocus=r,b.handleLayers()}),c("Arbiter").subscribe("PhotoSnowlift.CLOSE",function(){b.userFocus=p,b.focusedStory=null,b.updateTimeTrackingData(!1,"snowlift_close")}));this._userActivityPoller()}d("Run").onLeave(this.cleanup.bind(this));d("Run").onUnload(this.cleanup.bind(this))};b._getScrollListener=function(a){return c("Event").listen(window,"scroll",a)};b.cleanup=function(){this.subscriptions&&(this.subscriptions.release(),this.subscriptions=null),this.isTimetrackingEnabled&&(c("clearTimeout")(this.userActivityPollerTimeoutID),this.updateTimeTrackingData(!0,"cleanup")),this.initialStories=[],this._headLoadStoryCount=0};b.fireTimer=function(){this.initialStoriesLogged||(this.initialStories.forEach(this.markStoryRead,this),this.initialStoriesLogged=!0),this.storiesInView=this.getStoriesInView(),this.storiesInView.forEach(this.markStoryRead,this)};b.getSessionID=function(){return null};b._userActivityPoller=function(){var a=this;!this.userInactiveLock&&!c("UserActivity").isActive(this.timeToBeConsideredInactive)&&(this.userInactiveLock=!0,this.userFocus=q,this.updateTimeTrackingData(!1,"user_activity_inactive"),c("UserActivity").subscribeOnce(function(){a.userFocus=p,a.updateTimeTrackingData(!1,"user_activity_active"),a.userInactiveLock=!1}));this.userActivityPollerTimeoutID=c("setTimeout")(c("TimeSlice").guard(this._userActivityPoller.bind(this),"ViewportTracking poll setTimeout",{propagationType:c("TimeSlice").PropagationType.EXECUTION}),this.userActivityPollingInterval)};b.getQueryID=function(a){return-1};b.getFBFeedLocations=function(a){return-1};b.getFBFeedInsertionPosition=function(a){return-1};b.createVPVDTimer=function(a){var b=document.createElement("label");b.setAttribute("for",a.toString());b.setAttribute("class","vpvd_debug_timer");return b};b.updateVPVDTimer=function(a){var b=this.activeStories[a].story;if(!b)return;var d=c("DOM").scry(b,".vpvd_debug_timer");if(!d.length){d=[this.createVPVDTimer(b),this.createVPVDTimer(b)];var e=c("DOM").scry(b,".UFIRow");e.length&&e[e.length-1].clientWidth>0?e[e.length-1].appendChild(d[0]):b.appendChild(d[0]);b.insertBefore(d[1],b.firstChild)}e=this.totalVPVDuration[a];b=Math.floor(e/1e3)+"."+Math.floor(e%1e3/100);c("DOM").setContent(d[0],b);c("DOM").setContent(d[1],b)};b.updateVPVDTimers=function(){for(var a in this.activeStories)Object.prototype.hasOwnProperty.call(this.activeStories,a)&&this.updateVPVDTimer(a)};b.shouldDiscardStory=function(a){var b=this.activeStories[a].height||0;return b!=this.activeStories[a].story_height&&b<this.totalHeight/2};b.calculateTotalHeight=function(){this.totalHeight=0;for(var a in this.activeStories)Object.prototype.hasOwnProperty.call(this.activeStories,a)&&(this.totalHeight+=this.activeStories[a].height)};b.updateVPVDurations=function(a){var b;if(this.latestUserFocus===q||a-this.latestTimeTrackingTimestamp>this.discardVPVDIntervalThreshold)return;b=(b={},b[n]=0,b[m]=0,b[l]=0,b);var c=a-this.latestTimeTrackingTimestamp>=this.focused_state_duration;this.totalVisibleHeight=0;for(var d in this.activeStories)if(Object.prototype.hasOwnProperty.call(this.activeStories,d)&&!(this.latestUserFocus===p&&c&&this.shouldDiscardStory(d))){var e=this.activeStories[d].state||null,f=this.activeStories[d].height||0;e!==null&&Object.prototype.hasOwnProperty.call(b,e)&&(b[e]+=f);this.totalVisibleHeight+=f}e=0;f=a-this.latestTimeTrackingTimestamp;this.latestUserFocus===p&&(f=b[l]>0?this.focused_state_duration:this.active_state_duration,f=Math.min(f,a-this.latestTimeTrackingTimestamp),e=a-this.latestTimeTrackingTimestamp-f);a=0;var g=l;for(var h=l;h>=n;h--)if(b[h]>0){a=b[h];g=h;break}h=b[l]+b[m]+b[n];for(d in this.activeStories)if(Object.prototype.hasOwnProperty.call(this.activeStories,d)){if(this.latestUserFocus===p&&c&&this.shouldDiscardStory(d))continue;b=this.activeStories[d].state||o;if(a>0&&b>=g){b=this.activeStories[d].height||0;b=f*(b/a);this.activeStories[d].vpvd+=b;this.totalVPVDuration[d]+=b}if(h>0){var i=this.activeStories[d].height||0;b=e*(i/h);this.activeStories[d].vpvd+=b;this.totalVPVDuration[d]+=b}}};b.updateActiveStory=function(a,b,c,d){this.activeStories[a].state=b,this.activeStories[a].ts=c,this.activeStories[a].height_snapshot=d[a].height,this.activeStories[a].is_focused=this.focusedStory===d[a].story,this.activeStories[a].story_height=d[a].story_height,this.vpvdAnalysis&&(this.activeStories[a].visible_position=d[a].visible_position,this.activeStories[a].y=d[a].y)};b.updateActiveStories=function(a,b){for(var c in a)if(Object.prototype.hasOwnProperty.call(a,c))if(c in this.activeStories){var d=a[c].height||0;this.activeStories[c].height=d;d=d-(this.activeStories[c].height_snapshot||0);this.focusedStory===a[c].story?this.updateActiveStory(c,l,b,a):d<=-this.height_diff_to_change_state?this.updateActiveStory(c,this.shouldDiscardStory(c)?o:n,b,a):(d>=this.height_diff_to_change_state||this.activeStories[c].is_focused||this.activeStories[c].height===this.activeStories[c].story_height)&&this.updateActiveStory(c,m,b,a)}else this.storyIDsWasInView[c]=!0,this.activeStories[c]={evp_ts:b,story:a[c].story,height:a[c].height,vpvd:0},this.totalVPVDuration[c]||(this.totalVPVDuration[c]=0),this.updateActiveStory(c,m,b,a),this.behavior.afterStoryEntersViewport&&this.behavior.afterStoryEntersViewport(this.activeStories[c].story)};b.recordVPVDurations=function(a,b){for(var c in this.activeStories)if(Object.prototype.hasOwnProperty.call(this.activeStories,c)&&(b||!(c in a))){var d=this.activeStories[c].vpvd||0;(d>this.focused_state_duration||d===this.totalVPVDuration[c]||d>=250)&&this.recordTimeStoryWasInView(this.activeStories[c]);this.behavior.afterStoryExitsViewport&&this.behavior.afterStoryExitsViewport(this.activeStories[c].story);delete this.activeStories[c]}};b.updateTimeTrackingData=function(a,b){this.userActivity=b;this.activeStories||(this.activeStories={});b=Date.now();this.latestTimeTrackingTimestamp||(this.latestTimeTrackingTimestamp=b);var c=this.getAllStoriesInView();this.calculateTotalHeight();this.updateVPVDurations(b);this.updateActiveStories(c,b);this.vpvdDebug&&this.updateVPVDTimers();this.recordVPVDurations(c,a);a?this.latestTimeTrackingTimestamp=0:this.latestTimeTrackingTimestamp=b;this.latestUserActivity=this.userActivity;this.latestUserFocus=this.userFocus;this.focusedStory&&(this.latestActiveStory=this.focusedStory);this.latestFocusedStory=this.focusedStory;this.focusedStory=null};b.needsToUpdateTimeTrackingData=function(){return!(this.latestUserFocus===this.userFocus&&(this.userFocus===q||this.userFocus===p&&!this.latestFocusedStory&&!this.focusedStory))};b.getfocusedStory=function(a){var b=this.getAllStoriesInView();for(var c in b)if(Object.prototype.hasOwnProperty.call(b,c)){var e=b[c].story;if(e&&d("ViewportTrackingHelper").isDescendantOf(a,e))return e}return null};b.handleLayers=function(){if(this.userFocus===r||this.userFocus===s){this.focusedStory=this.latestActiveStory;this.updateTimeTrackingData(!1,"media_layer");return!0}return!1};b.didInteractWithStream=function(a){if(!this.behavior.getStream)return!1;var b=this.behavior.getStream();return d("ViewportTrackingHelper").isDescendantOf(a,b)||d("ViewportTrackingHelper").isDescendantOf(b,a)};b.handleScroll=function(a){if(this.handleLayers())return;var b=Date.now();this.behavior.getStream||i(0,1116);var d=c("getElementPosition")(this.behavior.getStream()).y;d!=this.lastStreamY||b-this.latestStreamYChangedTimeStamp<2.5*this.scrollThrottlingInterval||this.didInteractWithStream(a.target)?(this.latestStreamYChangedTimeStamp=b,this.userFocus=p):this.userFocus=q;this.lastStreamY=d;(this.userFocus===p||this.needsToUpdateTimeTrackingData())&&this.updateTimeTrackingData(!1,"scroll")};b.handleKeyboard=function(a){if(this.handleLayers())return;this.didInteractWithStream(a.target)?(this.userFocus=p,this.focusedStory=this.getfocusedStory(a.target)):d("CSS").hasClass(a.target,"shareInput")?(this.userFocus=p,this.focusedStory=this.latestActiveStory):this.userFocus=q;(this.userFocus===p||this.needsToUpdateTimeTrackingData())&&this.updateTimeTrackingData(!1,"keyboard")};b.handleMouse=function(a){if(this.handleLayers())return;if(a.type!="click"&&a.clientX===this.lastMouseX&&a.clientY===this.lastMouseY)return;this.didInteractWithStream(a.target)?(this.userFocus=p,this.focusedStory=this.getfocusedStory(a.target)):this.userFocus=q;this.lastMouseX=a.clientX;this.lastMouseY=a.clientY;this.needsToUpdateTimeTrackingData()&&this.updateTimeTrackingData(!1,a.type)};b.getStoriesInView=function(){var a=this.behavior.getAllStories(),b=[],c=!1;for(var e=0;e<a.length;e++){var f=a[e],g=this.behavior.getStoryID(f);if(g&&this.hasBeenVisible(g))continue;if(d("ViewportTrackingHelper").isVisible(f,this.minSizeToBeVisible))f.getAttribute("data-insertion-position")===null&&f.setAttribute("data-insertion-position",(e-this._headLoadStoryCount).toString()),b.push(f),c=!0;else if(c)break}return b};b.getAllStoriesFromCache=function(){this.cachedAllStories.length===0&&(this.cachedAllStories=this.behavior.getAllStories());return this.cachedAllStories};b.invalidateAllStoriesCache=function(){this.cachedAllStories=[]};b.getBlueBarHeightDifference=function(){return window.innerHeight>=400?t:0};b.getAllStoriesInView=function(){var a=this.getAllStoriesFromCache(),b={},e=!1,f=0,g=a.length,h=1,i=a.length;this._indexOfLastVisibleStoryOnPreviousPass>g/2&&(f=g-1,g=-1,h=-h);var j=window.innerHeight-this.getBlueBarHeightDifference();for(f=f;f!=g;f+=h){var k=a[f],l=d("ViewportTrackingHelper").getHeightIfVisible(k,Math.min(this.minSizeToBeVisible,j/2));if(l>0||k===this.focusedStory){k.getAttribute("data-insertion-position")===null&&k.setAttribute("data-insertion-position",(f-this._headLoadStoryCount).toString());var m=this.behavior.getStoryID(k);m&&(b[m]={story:k,height:l,story_height:d("DOMDimensions").getElementDimensions(k).height},e=!0,this.vpvdAnalysis&&(b[m].y=c("getElementPosition")(k).y,b[m].visible_position=f,i=Math.min(i,f)))}else if(e){this._indexOfLastVisibleStoryOnPreviousPass=f-h;break}}if(this.vpvdAnalysis){this.numVisibleStories=0;for(m in b)Object.prototype.hasOwnProperty.call(b,m)&&(b[m].visible_position-=i,this.numVisibleStories++)}return b};b.getTimetrackingDataToLog=function(a){a={evt:j,time_spent_id:c("pageID"),vpvd_start_timestamp:a.evp_ts||null,vpvd_time_delta:Math.round(a.vpvd||0),story_height:d("DOMDimensions").getElementDimensions(a.story).height,viewport_height:this.cachedViewportHeight,sid_raw:d("WebSession").getId()};return{ft:a}};b.getGapsInfoToLog=function(a){var b=this;if(a==null)return null;var e=d("AdAllocationIntegrityUtils").getFeedStoryCategory(a),f=new(c("AdAllocationIntegrityGapsInfo"))(e);if(!d("AdAllocationIntegrityUtils").isGapRuleCategory(e))return f;else{e=d("AdAllocationIntegrityUtils").getDedupKey(a);if(e===null)return null;a=this.behavior.getAllStories().filter(function(a){return Object.prototype.hasOwnProperty.call(b.storyIDsWasInView,b.behavior.getStoryID(a))});var g=-1;for(var h=a.length-1;h>=0;h--){var i=d("AdAllocationIntegrityUtils").getDedupKey(a[h]);if(g<0)i!==null&&e===i&&(g=h,f.setDistToTop(g+1));else{i=d("AdAllocationIntegrityUtils").getFeedStoryCategory(a[h]);d("AdAllocationIntegrityUtils").isGapRuleCategory(i)&&f.setDistIfAbsent(i,g-h)}}return f}};b.recordTimeStoryWasInView=function(a){if(!this.isTimetrackingEnabled)return;var b=a.story;if(!a.vpvd||!b)return;if(a.vpvd>0){a=this.getTimetrackingDataToLog(a);var d=c("collectDataAttributes")(b,["ft"]);Object.assign(a.ft,d.ft);if(this.adAllocationIntegrityLoggingEnabled){var e=this.getGapsInfoToLog(b);Object.assign(a.ft,e)}e=!!d.ft.ei&&a.ft.vpvd_time_delta>this.minTimeToReportImmediately;a.ei&&delete a.ei;this.sendDataToLog(b,a,e)}};b.hasBeenVisible=function(a){return a in this.readStoryIDs};b.sendDataToLog=function(a,b,d){if(this.useBanzai){var e={};d&&(e.delay=3e3);d=this.getSessionID();d&&(b.ft.session_id=d);b.ft.raw_client_time=Date.now()/1e3;c("WwwVpvFeedTrackingFalcoEvent").log(function(){return{tracking:JSON.stringify(b.ft)}})}else c("clickRefAction")(k,a,null,"FORCE",b)};b.markStoryRead=function(a){var b=this.behavior.getStoryID(a);if(!b||this.hasBeenVisible(b))return;this.readStoryIDs[b]=!0;b=this._getDataToLogImpl(a);var e=c("collectDataAttributes")(a,["ft"]);Object.assign(b.ft,e.ft);delete b.ei;this.sendDataToLog(a,b,!1);this.vpvDebug&&d("CSS").addClass(a,"_5m7s")};b._getDataToLogImpl=function(a){a=this.behavior.getDataToLog(a);a.ft||(a.ft={});return a};return a}();u.clearSingleton=function(){};var v={getAllStories:function(){return[]},getStoryID:function(a){return null},getDataToLog:function(a){return{}}};a=c("viewportTrackingBuilder")(function(a){return new u(v)});u.factory=a.factory.bind(a);u.singleton=a.singleton.bind(a);u.clearSingleton=a.clearSingleton.bind(a);u.getBehavior=function(){return v};g["default"]=u}),98);
__d("collectSubtreeData",[],(function(a,b,c,d,e,f){function g(a,b,c,d,e){if(a.offsetWidth===0&&a.offsetHeight===0)return e;var f={};if(a.getAttribute)for(j=0;j<b.length;j++){k=b[j];var h=a.getAttribute(c[k]);if(h){f[k]={};h=JSON.parse(h);for(var i in d)h[i]!==void 0&&(f[k][i]=!0,e[k]===void 0&&(e[k]={}),e[k][i]===void 0&&(e[k][i]=[]),d[i].length>0&&e[k][i].push(d[i]),e[k][i].push("("+h[i]))}}for(var j=0;j<a.childNodes.length;j++){h=a.childNodes[j];g(h,b,c,d,e)}for(var k in f)for(i in f[k]){h=e[k][i][e[k][i].length-1];h.length>0&&h.charAt(0)=="("?e[k][i][e[k][i].length-1]=h.substr(1):e[k][i].push(")")}return e}function a(a,b){var c={};for(var d=0;d<b.length;++d)c[b[d]]="data-"+b[d];d={tn:"","tn-debug":","};var e={};g(a,b,c,d,e);for(a in e)for(b in e[a])e[a][b]=e[a][b].join("");return e}e.exports=a}),null);
__d("recordTNTreeData",["collectSubtreeData"],(function(a,b,c,d,e,f){function a(a,c){var d={},e=b("collectSubtreeData")(a,["ft"]);for(var f in e.ft)d[f+"_tree"]=e.ft[f],f==="tn-debug"&&a.setAttribute("tn-debug_subtree",e.ft[f]);d.evt_value=a.offsetHeight;c&&(d.offset=Math.max(0,a.offsetTop-c.offsetTop));return d}e.exports=a}),null);
__d("StreamViewportTracking",["DOM","DOMDimensions","DataAttributeUtils","ViewportTracking","ge","recordTNTreeData","viewportTrackingBuilder"],(function(a,b,c,d,e,f,g){"use strict";var h=51;function i(a,b,e,f,g){f===void 0&&(f=h);g===void 0&&(g=null);return{_stream:null,getDataFromConfig:function(a,b){b.isTimetrackingEnabled=!0},getAllStories:function(){var a=c("DOM").scry(this.getStream(),e);return a.filter(function(a){return c("DataAttributeUtils").getDataFt(a)})},getStream:function(){if(b)return b;this._stream||(this._stream=c("ge")("home_stream"));return this._stream},getStoryID:function(a){var b=JSON.parse(c("DataAttributeUtils").getDataFt(a));if(b&&b.mf_story_key)return b.mf_story_key;return g!==null?g(a):null},getDataToLog:function(a){var b=this.getStream();b=c("recordTNTreeData")(a,b);var e=a.getAttribute("data-insertion-position");e!==null&&(b.inspos=e);b.evt=f;b.vpv_time=Math.round(Date.now()/1e3);e=c("DOM").scry(a,".fbStoryAttachmentImage")[0];if(e){a=d("DOMDimensions").getElementDimensions(e);b.story_image_height=a.height;b.story_image_width=a.width}return{ft:b}}}}var j=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}var d=a.prototype;d.getQueryID=function(a){a=JSON.parse(c("DataAttributeUtils").getDataFt(a));return a.qid};d.getFBFeedLocations=function(a){a=JSON.parse(c("DataAttributeUtils").getDataFt(a));return a.fbfeed_location};d.getFBFeedInsertionPosition=function(a){a=JSON.parse(c("DataAttributeUtils").getDataFt(a));return a.insertion_position};d.getTimetrackingDataToLog=function(a){var d=b.prototype.getTimetrackingDataToLog.call(this,a);if(this.ctaLoggingEnabled){a=c("DOM").scry(a.story,"[data-is-cta]").map(function(a){a=c("DataAttributeUtils").getDataFt(a);a=a&&JSON.parse(a);return a&&a.cta_types}).filter(function(a){return!!a});a.length>0&&(d.ft.cta_types=a)}return d};d.cleanup=function(){k.clearSingleton(),b.prototype.cleanup.call(this)};return a}(c("ViewportTracking")),k=c("viewportTrackingBuilder")(function(a,b){b=new j(i(a,b,".uiStreamStory"));b.init(a);return b});j.factory=k.factory.bind(k);j.singleton=k.singleton.bind(k);j.clearSingleton=k.clearSingleton.bind(k);j.getBehavior=i;g["default"]=j}),98);
__d("UFI2TypingIndicator.react",["cx","fbt","MercuryTypingAnimation_DEPRECATED.react","RelayHooks","UFI2RealtimeContainer.react","UFI2TypingIndicatorImpl_feedback.graphql","UFI2TypingIndicator_feedback.graphql","debounceAcrossTransitions","gkx","react","requireDeferred","useVisibilityObserver"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l=d("react");e=d("react");var m=e.useCallback,n=e.useEffect,o=e.useMemo,p=e.useState,q=c("requireDeferred")("UFI2TypingSubscription").__setRef("UFI2TypingIndicator.react"),r=15*1e3;function s(a){a=a.feedback_typers;return((a=a==null?void 0:a.other_count)!=null?a:0)>0?i._("Someone is typing a comment..."):null}function t(a){a=a.feedback;var e=p({isTyping:!1,isVisible:!1,label:null}),f=e[0],g=f.label,h=f.isVisible,i=f.isTyping,k=e[1],t=d("RelayHooks").useFragment(j!==void 0?j:j=b("UFI2TypingIndicatorImpl_feedback.graphql"),a),u=d("RelayHooks").useRelayEnvironment(),v=o(function(){return s(t)},[t]);n(function(){k(function(a){return babelHelpers["extends"]({},a,{isTyping:Boolean(v),label:v!=null?v:a.label})})},[v]);var w=o(function(){return c("debounceAcrossTransitions")(function(){return k(function(a){return babelHelpers["extends"]({},a,{isTyping:!1})})},r)},[]);n(function(){i===!0&&w();return function(){return w.reset()}},[w,i]);f=m(function(){var a=t.id,b=t.subscription_target_id;if(a==null||b==null)return null;var c=!1,d=function(){};b={dispose:function(){c=!0,d(),w.reset()}};q.onReady(function(b){if(!c){b=b.subscribe(u,a,{onNext:function(){w()}});d=b.dispose}});return b},[w,t,u]);e=m(function(){k(function(a){return babelHelpers["extends"]({},a,{isVisible:!1})})},[]);a=m(function(){k(function(a){return babelHelpers["extends"]({},a,{isVisible:!0})})},[]);e=c("useVisibilityObserver")({onHidden:e,onVisible:a});return l.jsx(c("UFI2RealtimeContainer.react"),{subscribe:f,children:l.jsx("div",{className:"_3bem",ref:e,children:l.jsxs("div",{className:(h?"_1kyy":"")+" _3bep"+(i===!0?" __f9":""),children:[l.jsx(c("MercuryTypingAnimation_DEPRECATED.react"),{className:"__fa"}),l.jsx("div",{className:"__fb",children:g})]})})})}t.displayName=t.name+" [from "+f.id+"]";function a(a){a=a.feedback;a=d("RelayHooks").useFragment(k!==void 0?k:k=b("UFI2TypingIndicator_feedback.graphql"),a);return a.is_eligible_for_real_time_updates===!1||c("gkx")("1352841")?null:l.jsx(t,{feedback:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("UFI2ViewOptionsSelectorImpl.react",["cx","PopoverMenu.react","ReactXUIMenu","joinClasses","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var d=b.prototype;d.render=function(){var a=this.props,b=a.onChange,d=a.alignh,e=a.menuClassName,f=a.selectorOptions,g=a.selectedOption,h=a.children;a=a.menuRef;e=i.jsx(c("ReactXUIMenu").SelectableMenu,{className:c("joinClasses")(e,"_21ii"),"data-testid":void 0,onItemClick:function(a,c){b(c.item.getValue())},children:f.map(function(a){return i.jsx(c("ReactXUIMenu").SelectableItem,{label:a.title,selected:g===a,value:a.value,children:i.jsxs("div",{className:"_1ojq","data-ordering":a.value,"data-testid":void 0,children:[i.jsx("div",{className:"_1ojr",children:a.title}),i.jsx("div",{className:"_1ojv",children:a.description})]})},a.value)})});return i.jsx(c("PopoverMenu.react"),{alignh:d,alignv:"baseline",className:"_21iq",menu:e,ref:a,children:h})};return b}(i.PureComponent);a.defaultProps={alignh:"right"};g["default"]=a}),98);
__d("UFI2TypingSubscription",["RelayModern","UFI2TypingSubscription.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h!==void 0?h:h=b("UFI2TypingSubscription.graphql");function a(a,b,c){return d("RelayModern").requestSubscription(a,{onNext:c&&c.onNext,subscription:i,variables:{input:{feedback_id:b}}})}g.subscribe=a}),98);
__d("LiveVideoInteractiveAlertSidePaneView.react",["Arbiter","JSResource","lazyLoadComponent","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");b=d("react");var i=b.useEffect,j=b.useState,k=c("lazyLoadComponent")(c("JSResource")("IdentityBadgeEarnedAlertView.react").__setRef("LiveVideoInteractiveAlertSidePaneView.react"));function a(a){var b=j(null),d=b[0],e=b[1];i(function(){var a=c("Arbiter").subscribe("LiveVideoInteractiveAlert/sidePaneAlertReceived",function(a,b){return e(b)});return function(){return a&&a.unsubscribe()}});if(d===null)return null;switch(d.type){case"IDENTITY_BADGE_EARNED":return h.jsx(h.Suspense,{fallback:h.jsx("span",{}),children:h.jsx(k,{badgeName:"Familiar Face",badgeType:"frequent_watcher",videoID:a.videoID,onDismiss:function(){return e(null)}})});default:return null}}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("TahoeActionTypes",["keyMirror"],(function(a,b,c,d,e,f,g){"use strict";a=c("keyMirror")({SET_MC:null,EXIT:null,SET_UFI_INSTANCE_ID:null});b=a;g["default"]=b}),98);
__d("TahoeCommentComposer",["csx","Arbiter","DOM","Run","SubscriptionsHandler"],(function(a,b,c,d,e,f,g,h){"use strict";function a(a){var b=new(c("SubscriptionsHandler"))();b.addSubscriptions(c("Arbiter").subscribe("TahoeView/selectCommentTab",function(){var b=c("DOM").scry(a.commentComposer,"._7ra0 ._65td"),d=c("DOM").scry(a.commentComposer,"._7ra0 ._5rpu");(d==null?void 0:d[0])?d[0].focus():(b==null?void 0:b[0])&&b[0].focus()}));d("Run").onLeave(function(){b.release()})}g.init=a}),98);
__d("TahoeConstants",["CurrentUser"],(function(a,b,c,d,e,f,g){"use strict";a=640;b=360;d=1e3;e=160;f=400;var h=c("CurrentUser").isLoggedIn()?49:0;c=c("CurrentUser").isWorkUser()?"Workplace":"Facebook";var i="video-up-next-";g.MIN_PLAYER_WIDTH=a;g.MIN_PLAYER_HEIGHT=b;g.MAX_PLAYER_HEIGHT=d;g.MIN_BOTTOM_PANE_HEIGHT=e;g.SIDE_PANE_WIDTH=f;g.BLUE_BAR_HEIGHT=h;g.DEFAULT_BROWSER_TITLE=c;g.UP_NEXT_UNIT_ID_PREFIX=i}),98);
__d("TahoeCopyrightMessage.react",["cx","fbt","ix","Image.react","SubscriptionsHandler","XUICloseButton.react","react"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";var k=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={hasCopyrightAction:c.props.videoController.isAudioBlocked()},c.$2=function(){c.setState({hasCopyrightAction:!1})},b)||babelHelpers.assertThisInitialized(c)}var d=b.prototype;d.componentDidMount=function(){var a=this;this.$1=new(c("SubscriptionsHandler"))();this.$1.addSubscriptions(this.props.videoController.addListener("blockVideo",function(){a.setState({hasCopyrightAction:!1})}),this.props.videoController.addListener("blockAudio",function(){a.setState({hasCopyrightAction:!0})}),this.props.videoController.addListener("unblockAudio",function(){a.setState({hasCopyrightAction:!1})}))};d.componentWillUnmount=function(){this.$1.release()};d.render=function(){return!this.state.hasCopyrightAction?null:k.jsxs("div",{className:"_6ukn",children:[k.jsx(c("Image.react"),{src:j("519615")}),k.jsx("div",{className:"_6uko",children:this.props.videoController.isBroadcaster()?i._("Your video may be muted in some countries while you're playing this song."):i._("This video is muted because it contains music that can't be played in the country you're in.")}),k.jsx(c("XUICloseButton.react"),{className:"_6ujz",shade:"light",tooltip:"Close",onClick:this.$2})]})};return b}(k.Component);g["default"]=a}),98);
__d("TahoeDispatcher",["ExplicitRegistrationReactDispatcher"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){b=a.call(this,b)||this;b.dispatch=b.dispatch.bind(babelHelpers.assertThisInitialized(b));return b}return b}(c("ExplicitRegistrationReactDispatcher"));b=new a({strict:!0});g["default"]=b}),98);
__d("TahoeMainPlayerViewportTracking",["csx","StreamViewportTracking"],(function(a,b,c,d,e,f,g,h){"use strict";var i=25,j=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}var c=a.prototype;c.getTimetrackingDataToLog=function(a){a=b.prototype.getTimetrackingDataToLog.call(this,a);a.ft.src=i;return a};return a}(c("StreamViewportTracking"));function a(a,b,d){b=new j(c("StreamViewportTracking").getBehavior(a,b,"._5-yb",d));b.init(a);return b}g.setup=a}),98);
__d("TahoeUpNextUnitPlaceholder.react",["cx","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");function a(){return i.jsxs("div",{children:[i.jsx("div",{className:"_27do"}),i.jsx("div",{className:"_27dr"}),i.jsx("div",{className:"_27em"}),i.jsx("div",{className:"_27en"})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("TahoeSidePanePlaceholder.react",["cx","Layout.react","TahoeUpNextUnitPlaceholder.react","TahoeV2Config","react"],(function(a,b,c,d,e,f,g,h){var i=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var d=b.prototype;d.render=function(){return c("TahoeV2Config").showTahoe2UI?i.jsx("div",{className:"_wxj _6j4x",children:i.jsxs("div",{className:"_6j4y",children:[i.jsx("div",{className:"_6j4z _6j4-"}),i.jsx("div",{className:"_6j4z _6j4_"}),i.jsx("div",{className:"_6j4z _6j50"}),i.jsx("div",{className:"_6j4z _6j54"}),i.jsx("div",{className:"_6j55",children:i.jsxs(c("Layout.react"),{children:[i.jsx(c("Layout.react").Column,{className:"_3-90",children:i.jsx("div",{className:"_6j56"})}),i.jsx(c("Layout.react").FillColumn,{children:i.jsx("div",{className:"_6j57"})})]})})]})}):i.jsxs("div",{className:"_wxj _1-z7",children:[i.jsx("div",{className:"_1kna"}),i.jsx("div",{className:"_1knc"}),i.jsx("div",{className:"_1knd"}),i.jsx("div",{className:"_1kne"}),i.jsx("div",{className:"_1knf"}),i.jsx("div",{className:"_1kng"}),i.jsx(c("TahoeUpNextUnitPlaceholder.react"),{})]})};return b}(i.Component);g["default"]=a}),98);
__d("TahoeUpNextViewportTracking",["csx","StreamViewportTracking"],(function(a,b,c,d,e,f,g,h){"use strict";var i="tahoe_up_next_videos",j=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}var c=a.prototype;c.getTimetrackingDataToLog=function(a){a=b.prototype.getTimetrackingDataToLog.call(this,a);a.ft.tracking_source=i;return a};return a}(c("StreamViewportTracking"));function a(a,b,d){b=new j(c("StreamViewportTracking").getBehavior(a,b,"._bne",d));b.init(a);return b}g.setup=a}),98);
__d("TahoeWatchLogo.react",["fbt","Image.react","Link.react","TetraText.react","URI","VideoHomeTypedLoggerLite","XVideoHomeFeedController","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j=d("react").useCallback;function a(a){var b=a.paddingBottom,d=a.paddingTop;a=a.clickable;a=a===void 0?!1:a;var e=i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"x78zum5 x16ydxro x1db2dqx",children:i.jsx(c("Image.react"),{src:"/images/litestand/bookmarks/sidebar/icons/mobile/icon-watch-tv.png"})}),i.jsx(c("TetraText.react"),{type:"headlineEmphasized2",children:h._("Watch")})]}),f=j(function(){c("VideoHomeTypedLoggerLite").log({event:"click",click_target:"tahoe_watch_logo"}),c("URI").go(c("XVideoHomeFeedController").getURIBuilder().getURI(),!0)},[]);return a?i.jsx(c("Link.react"),{className:"x6s0dn4 x78zum5 x1603h9y x117nqv4 xzl6hoh xcicffo x1tpqehw x1wsuqlk x1lku1pv",style:{paddingBottom:b,paddingTop:d},onClick:f,children:e}):i.jsx("div",{className:"x6s0dn4 x78zum5 x1603h9y x117nqv4 xzl6hoh xcicffo x1tpqehw x1wsuqlk",style:{paddingBottom:b,paddingTop:d},children:e})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("TahoeUpNextWatchEntryPoint.react",["cx","fbt","TahoeWatchLogo.react","TetraButton.react","VideoHomeTypedLoggerLite","XVideoHomeFeedController","react","useFullViewImpression"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react"),k=d("react").useCallback;function a(a){a.sidepaneElement;a=k(function(a){a.currentTime,c("VideoHomeTypedLoggerLite").log({event:"tahoe_up_next_video_watch_entry_point_impression"})},[]);a=c("useFullViewImpression")({onFullViewStart:a});var b=k(function(){c("VideoHomeTypedLoggerLite").log({event:"click",click_target:"tahoe_up_next_video_watch_entry_point"})},[]);return j.jsxs("div",{className:"_8c-h",ref:a,children:[j.jsx("div",{className:"_8c-i",children:i._("More Videos on Watch")}),j.jsx(c("TahoeWatchLogo.react"),{paddingBottom:6,paddingTop:6}),j.jsx(c("TetraButton.react"),{label:i._("Visit Watch"),onPress:b,linkProps:{url:c("XVideoHomeFeedController").getURIBuilder().getURI().toString()},size:"medium"})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("TahoeVideoStore",["FluxMapStore","TahoeActionTypes","TahoeDispatcher","immutable"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=d=a.call.apply(a,[this].concat(f))||this,d.reduce=function(a,b){switch(b.type){case c("TahoeActionTypes").SET_MC:a=a.set("mediaController",b.mediaController);break;case c("TahoeActionTypes").SET_UFI_INSTANCE_ID:a=a.set("ufiInstanceID",b.ufiInstanceID);break;case c("TahoeActionTypes").EXIT:a=c("immutable").Map();break;default:break}return a},b)||babelHelpers.assertThisInitialized(d)}return b}(c("FluxMapStore"));a.__moduleID=f.id;b=new a(c("TahoeDispatcher"));g["default"]=b}),98);
__d("VideoInfoBottomPaneShimmer.react",["cx","ImageBlock.react","InlineBlock.react","LeftRight.react","joinClasses","react"],(function(a,b,c,d,e,f,g,h){var i=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var d=b.prototype;d.render=function(){return i.jsxs("div",{className:"_2ve3 _2ve4",children:[i.jsxs("div",{children:[i.jsxs(c("LeftRight.react"),{children:[i.jsx(j,{width:320}),i.jsxs("span",{children:[i.jsx(l,{}),i.jsx(l,{}),i.jsx(l,{})]})]}),i.jsx(j,{width:222}),i.jsx("div",{className:"_2vev",children:i.jsxs(c("ImageBlock.react"),{children:[i.jsx("span",{className:"_2vew"}),i.jsx(c("InlineBlock.react"),{alignv:"middle",height:36,fullWidth:!0,children:i.jsx(m,{width:90,height:16})})]})})]}),i.jsxs("div",{className:"_2vex",children:[i.jsx(k,{width:132}),i.jsx(k,{width:780}),i.jsx(k,{width:460})]})]})};return b}(i.Component);var j=function(a){return i.jsx(m,{width:a.width,height:16,className:"_2vey"})},k=function(a){return i.jsx(m,{className:"_2vez",height:8,width:a.width})},l=function(){return i.jsx(m,{width:60,height:16,display:"inline-block",className:"_2ve-"})},m=function(a){var b=c("joinClasses")(a.className,"_2ve_");return i.jsx("div",{className:b,style:{width:a.width,height:a.height,display:a.display}})};m.defaultProps={display:"block"};g["default"]=a}),98);
__d("VodPncSeeAllReactionsClickFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1744489");b=d("FalcoLoggerInternal").create("vod_pnc_see_all_reactions_click",a);e=b;g["default"]=e}),98);
__d("XTahoeAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/video/tahoe/async/{id}/",{privacy_mutation_token:{type:"String"},id:{type:"FBID",required:!0},externallogid:{type:"String"},sponsoreddata:{type:"String"},originalmediaid:{type:"String"},preload:{type:"Bool",defaultValue:!1},playerorigin:{type:"Enum",enumType:1},playersuborigin:{type:"String"},videolistid:{type:"String"},reactionvideochanneltype:{type:"Enum",enumType:1},reactionvideochannelsubtype:{type:"String"},upstreamplayersource:{type:"Enum",enumType:1},ispermalink:{type:"Bool",defaultValue:!1},feedtracking:{type:"StringVector",defaultValue:[]},storyidentifier:{type:"String"},numcopyrightmatchedvideoplayedconsecutively:{type:"Int"},comment_id:{type:"Int"},reply_comment_id:{type:"Int"},payloadtype:{type:"Enum",enumType:1},tahoeviewhasrendered:{type:"Bool",defaultValue:!1}})}),null);
__d("XTahoeUpNextAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/video/tahoe/upnext/async/{media_id}/",{channel_id:{type:"String"},media_id:{type:"FBID",required:!0},viewed_videos:{type:"FBIDSet"},caller:{type:"Enum",enumType:1},chainingindex:{type:"Int"},cursor:{type:"String"},search_keywords:{type:"String"},ispermalink:{type:"Bool",defaultValue:!1}})}),null);
__d("upNextVideoStateActionTypes",[],(function(a,b,c,d,e,f){"use strict";a="APPEND_TO_BUFFER";b="REMOVE_BUFFER_HEADS";c="RETRIEVE_FROM_BUFFER";d="SET_CHAINING_CURSOR";f.APPEND_TO_BUFFER=a;f.REMOVE_BUFFER_HEADS=b;f.RETRIEVE_FROM_BUFFER=c;f.SET_CHAINING_CURSOR=d}),66);
__d("upNextVideoStateReducer",["TahoeConstants","upNextVideoStateActionTypes"],(function(a,b,c,d,e,f,g){"use strict";var h={upNextVideoBuffer:[],retrievedUnits:[],chainingCursor:null},i=20;function a(a,b){a===void 0&&(a=h);switch(b.type){case d("upNextVideoStateActionTypes").APPEND_TO_BUFFER:var c=b.payload;if(Array.isArray(c))return{upNextVideoBuffer:a.upNextVideoBuffer.concat(c),retrievedUnits:a.retrievedUnits,chainingCursor:a.chainingCursor};else return a;case d("upNextVideoStateActionTypes").REMOVE_BUFFER_HEADS:c=b.payload;if(typeof c==="string"){c=d("TahoeConstants").UP_NEXT_UNIT_ID_PREFIX+c;while(a.upNextVideoBuffer.length>0&&a.upNextVideoBuffer[0].id!==c)a.upNextVideoBuffer.shift();a.upNextVideoBuffer.length>0&&a.upNextVideoBuffer.shift();return{upNextVideoBuffer:a.upNextVideoBuffer,retrievedUnits:a.retrievedUnits,chainingCursor:a.chainingCursor}}else return a;case d("upNextVideoStateActionTypes").RETRIEVE_FROM_BUFFER:c=b.payload;if(typeof c==="number"){var e=Math.min(i,a.upNextVideoBuffer.length);c=a.upNextVideoBuffer.slice(c,e);return{upNextVideoBuffer:a.upNextVideoBuffer,retrievedUnits:c,chainingCursor:a.chainingCursor}}else return a;case d("upNextVideoStateActionTypes").SET_CHAINING_CURSOR:if(typeof b.payload==="string")return{upNextVideoBuffer:a.upNextVideoBuffer,retrievedUnits:a.retrievedUnits,chainingCursor:b.payload};else return a;default:return a}}g["default"]=a}),98);
__d("upNextVideoStateStore",["redux","upNextVideoStateReducer"],(function(a,b,c,d,e,f,g){"use strict";a=d("redux").createStore(c("upNextVideoStateReducer"));b=a;g["default"]=b}),98);
__d("TahoeVideoView",["csx","cx","ActorURI","Arbiter","AsyncRequest","Bootloader","CSS","DOM","DOMQuery","Event","HTML","Keys","LiveVideoInteractiveAlertSidePaneView.react","ReactDOM","ReactRenderer","Run","StreamingReactionsTrayEvents","SubscriptionsHandler","TabBar","Tahoe","TahoeConstants","TahoeCopyrightMessage.react","TahoeMainPlayerViewportTracking","TahoeSidePanePlaceholder.react","TahoeUpNextViewportTracking","TahoeUpNextWatchEntryPoint.react","TahoeV2Config","TahoeVideoStore","TimeSlice","UFISharedDispatcher","URI","VideoInfoBottomPaneShimmer.react","VideoPermalinkURI","VodPncSeeAllReactionsClickFalcoEvent","XTahoeAsyncController","XTahoeUpNextAsyncController","ge","gkx","react","upNextVideoStateStore","uuidv4"],(function(a,b,c,d,e,f,g,h,i){var j=d("react"),k=4,l=c("TahoeV2Config").maximizeEndScreenVideoCount?16:9,m=/^[1-9]\d*$/,n=15,o="tahoe-preloaded-video",p=7,q="video-up-next-",r=4,s=97,t=7;a=function(){function a(a,b,e,f){var g=this;this.$7=null;this.$19=!1;this.$36=function(){d("CSS").hide(g.$18),g.$6.setFullWidth(!0)};this.$37=function(){d("CSS").show(g.$18),g.$6.setFullWidth(!1)};this.$71=function(){g.$10!=null&&d("CSS").hide(g.$10)};this.$6=a;this.$8=!1;this.$14=this.$6.getID();this.$30=b;this.$31=e;this.$29=this.$6.getVideoListID();this.$32=new Set([this.$14]);this.$3=c("uuidv4")();this.$26=!1;this.$27=[];this.$25=null;this.$6.addEvent(c("Event").listen(document,"keydown",this.$34.bind(this)));this.$22=d("CSS").setClass(c("DOM").create("div"),"_1e8c _2b-0");this.$18=d("CSS").setClass(c("DOM").create("div"),"_5-lm _3aw0 _6j1g _6j1h");this.$5=d("CSS").setClass(c("DOM").create("div"),"_17am");this.$11=d("CSS").setClass(c("DOM").create("div"),"_76-1");this.$15=d("CSS").setClass(c("DOM").create("div"),"hidden_elem");this.$16=d("TahoeConstants").DEFAULT_BROWSER_TITLE;this.$20=c("DOM").create("div");d("ReactDOM").render(j.jsx(c("TahoeSidePanePlaceholder.react"),{}),this.$18,"TahoeVideoView.js");d("ReactDOM").render(j.jsx(c("LiveVideoInteractiveAlertSidePaneView.react"),{videoID:a.getID()}),this.$11,"TahoeVideoView.js");c("TahoeV2Config").showTahoe2UI&&(this.$23=d("CSS").setClass(c("DOM").create("div"),"_437j"),d("CSS").hide(this.$22),c("DOM").appendContent(this.$6.getContent(),this.$23),d("ReactDOM").render([j.jsx(c("VideoInfoBottomPaneShimmer.react"),{},"shimmer"),j.jsx("div",{className:"_3l-q"},"inner")],this.$23,"TahoeVideoView.js"));this.$22&&c("DOM").appendContent(this.$6.getContent(),this.$22);c("DOM").appendContent(this.$6.getSideContent(),this.$18);c("DOM").appendContent(this.$18,this.$5);c("DOM").appendContent(this.$18,this.$11);c("DOM").appendContent(this.$6.getContent(),this.$15);c("DOM").appendContent(this.$6.getContent(),this.$20);b=this.$6.getChannelID();e=this.$6.getCaller();this.$6.getMediaController()?(this.$35(this.$6.getID(),!1,b,e,null,f),this.setUpEndScreen(),this.setUpUFI(),this.setCopyrightMessage()):this.updateView(this.$6.getID(),b,e,null,f,!0);this.$1=new(c("SubscriptionsHandler"))();this.$1.addSubscriptions(c("Arbiter").subscribe("UFIAddComment/focus",function(a,b){a=c("TahoeVideoStore").getState().toObject();a=a.ufiInstanceID;a===b.instanceid&&g.selectCommentTab()}),c("Arbiter").subscribe("quiet-mode-on",this.$36),c("Arbiter").subscribe("quiet-mode-off",this.$37),c("Arbiter").subscribe("quick-comments-visible-changed",function(a,b){return g.$38(b)}));c("UFISharedDispatcher").register(function(a){a.type==="story_show_comments"&&g.selectCommentTab()});this.$39();d("Run").onCleanupOrLeave(this.$6.getContent(),this.$40);d("Run").onUnload(this.$40)}var b=a.prototype;b.$40=function(){window.history.replaceState(window.history.state,"",new(c("URI"))(location.href).addQueryData({redirect:!1}).toString())};b.$39=function(){window.history.replaceState(window.history.state,"",new(c("URI"))(location.href).removeQueryData(["redirect"]).toString())};b.$38=function(a){var b=this.$41();if(b==null)return;a?d("CSS").addClass(b,"_4j8y"):d("CSS").removeClass(b,"_4j8y")};b.setUpUFI=function(){var a=this,b=this.$6.getMediaController();this.$42();b&&(this.$6.addEvent(b.addListener("commercialBreak/hideUFI",function(){return a.$43(!0)})),this.$6.addEvent(b.addListener("commercialBreak/showUFI",function(){return a.$43(!1)})))};b.$43=function(a){c("gkx")("678266")||d("CSS").conditionClass(this.$5,"_17an",a),this.$22&&d("CSS").conditionClass(this.$22,"_3qt9",a)};b.setCopyrightMessage=function(){if(this.$7)return;var a=this.$6.getMediaController();a=a;if(!a)return;var b=c("DOM").create("div",{className:"_6ukq"});this.$7=b;c("DOM").appendContent(this.$6.getMediaContent(),b);d("ReactDOM").render(j.jsx(c("TahoeCopyrightMessage.react"),{videoController:a}),b,"TahoeVideoView.js")};b.$44=function(){this.$7&&(d("ReactDOM").unmountComponentAtNode(this.$7,f.id),this.$7=null)};b.setUpEndScreen=function(){var a=this;this.$19=!1;var b=this.$6.getMediaController();this.$6.addEvent(b.addListener("stateChange",this.$45.bind(this)));if(b.isLiveVideo())return;this.$6.addEvent(b.addListener("toggleFullscreen",this.$45.bind(this)));var c=b;if(!c)return;c.addListener("updateStatus",function(b){var d=c.getPlaybackDuration();b=d-b.position;if(b>k){a.$25&&a.$46();return}b=c.getState();if(a.$25||b==="paused")return;a.$47(!1,!0,d>n,p)})};b.$47=function(a,b,e,f){var g=this;if(this.$25)return;var h=this.$6.getMediaController(),i=h;if(!i)return;var j=c("DOM").create("div",{className:"_4n-p"});h=c("upNextVideoStateStore").getState().upNextVideoBuffer;var k=this.$48(h);c("Bootloader").loadModules(["TahoeUpNextOverlayAndEndScreen.react"],function(h){d("ReactRenderer").constructAndRenderComponent_LEGACY(h,{currentVideoID:g.$6.getID(),videoIDs:c("TahoeV2Config").showMoreUpNext?k:g.$27.slice(0,l),shouldShowUpNextOverlay:e&&!g.$19,countdownTimeoutSec:f,vpc:i,logEvent:function(a){g.$6.logEvent(a)},tahoeController:g.$6,hasCustomBackgroundForUpNextOverlay:a,isCurrentVideoReplayable:b,viewportTrackingConfig:g.$33,onRendered:function(){g.$19=!0}},j,"callsite_a4579934545")},"TahoeVideoView");h=i.getRootNode();h=h&&h.firstChild;h&&(h.appendChild(j),this.$25=j)};b.$45=function(){var a=this.$6.getMediaController();a=a;!a.isLiveVideo()?this.$22&&d("CSS").conditionClass(this.$22,"_65dt",a.isState("finished")):a.isState("finished")&&!a.isGaming()&&this.$47(!0,!1,!0,p)};b.$46=function(){var a=this.$25;a&&(d("ReactDOM").unmountComponentAtNode(a,f.id),c("DOM").remove(a),this.$25=null)};b.$49=function(){d("CSS").addClass(this.$6.getContent(),"_29du"),d("CSS").addClass(this.$18,"_4f4w"),this.$23&&d("CSS").addClass(this.$23,"_1udj"),this.$22&&c("DOM").empty(this.$22)};b.$50=function(){var a=this;d("CSS").removeClass(this.$6.getContent(),"_29du");d("CSS").removeClass(this.$18,"_4f4w");this.$23&&d("CSS").removeClass(this.$23,"_1udj");var b=d("DOMQuery").find(this.$18,"._3dj6"),e=this.$33;e&&(this.$28=d("TahoeUpNextViewportTracking").setup(e,b,s),this.$24=d("TahoeUpNextViewportTracking").setup(e,b,r));if(this.$26){b=d("CSS").removeClass(b,"_3dj6");e=c("DOM").find(this.$15,"._3dj7");c("DOM").setContent(b,e);var f=d("DOMQuery").scry(this.$18,"._8fyn");if(f.length>0&&this.$27.length>=t){f=c("DOM").create("div",{className:"_8fym"});d("ReactDOM").render(j.jsx(c("TahoeUpNextWatchEntryPoint.react"),{sidepaneElement:this.$41()}),f,"TahoeVideoView.js");c("DOM").appendContent(b,f)}this.$26=!1;e.childNodes&&e.childNodes[0]&&this.$51(e.childNodes[0],function(){c("TimeSlice").guard(a.$52.bind(a),"Tahoe preload next video",{propagationType:c("TimeSlice").PropagationType.ORPHAN})()},function(){return a.selectCommentTab()})}c("TahoeV2Config").showTahoe2UI&&this.$6.resizeMedia()};b.$34=function(a){a.keyCode===c("Keys").ESC&&!a.cancelBubble&&!a.defaultPrevented&&!this.$6.getIsPermalink()&&(this.$6.logEvent("exit_with_esc"),this.$6.onExit())};b.$53=function(a,b){c("TahoeV2Config").showTahoe2UI&&(a&&this.$54(),b&&this.$55())};b.$56=function(b,e,f,g){if(!c("TahoeV2Config").showMoreUpNext){b=this.$57(b,f,g);b&&b.send()}f=d("DOMQuery").scry(this.$6.getContent(),"._1c_u");f[0]&&c("DOM").replace(f[0],d("DOMQuery").scry(e,"._5-yb")[0]);g=d("DOMQuery").scry(e,"._1w6j");b=d("DOMQuery").scry(e,"._3l-q");this.$53(g[0],b[0]);this.$22&&g[0]&&c("DOM").setContent(this.$22,g[0]);this.$23&&b[0]&&c("DOM").setContent(this.$23,b[0]);f=this.$41();f?c("DOM").replace(f,d("DOMQuery").find(e,"._1rgu")):c("DOM").appendContent(this.$18,d("DOMQuery").find(e,"._1rgu"));document.title=this.$16;a.registerPendingController(this.$17);this.$50();g=c("Tahoe").get();g&&g.emit("insertPreloadedElements")};b.$35=function(a,b,d,e,f,g,h){g===void 0&&(g=null);h===void 0&&(h=!1);this.$2=null;f=this.$58(a,b,f,h);g&&(g.commentID!=="0"&&f.setInt("comment_id",g.commentID),g.replyCommentID!=="0"&&f.setInt("reply_comment_id",g.replyCommentID));h=this.$6.getStoryIdentifier();h&&f.setString("storyidentifier",h);b&&this.$59(this.$60(f.setEnum("payloadtype","primary")));this.$61(this.$60(f.setEnum("payloadtype","secondary")),b);if(!c("TahoeV2Config").showMoreUpNext){g=this.$57(a,d,e);g&&g.send()}this.$49()};b.$62=function(a){a.disablePreload&&(this.$9=!0);a.viewportTrackingConfig&&(this.$33=a.viewportTrackingConfig);this.$8=!!a.hasNearlyCompleteLicensedMusicTag;document.title=a.videoTitle||d("TahoeConstants").DEFAULT_BROWSER_TITLE;a=this.$6.getContent();var b=this.$33;if(a&&b){var c=d("DOMQuery").scry(a,"._5-yb")[0];c&&(this.$13=d("TahoeMainPlayerViewportTracking").setup(b,a,s))}this.$50()};b.$63=function(a,b,e){e===void 0&&(e=null);if(!a)return;var f=d("DOMQuery").scry(this.$6.getContent(),"._1c_u");f[0]&&(c("DOM").replace(f[0],a),this.$64(this.$6.getContent(),e));this.$6.setAutoplayAllowed(b)};b.$65=function(a,b,d,e){if(e){d&&c("DOM").setContent(this.$22,d);if(a){e=this.$41();e?c("DOM").replace(e,a):c("DOM").appendContent(this.$18,a)}}else d&&c("DOM").appendContent(this.$22,d),a&&c("DOM").appendContent(this.$18,a);b&&c("DOM").replace(this.$23.lastChild,b)};b.$41=function(){return d("DOMQuery").scry(this.$18,"._1rgu")[0]};b.$58=function(a,b,d,e){e===void 0&&(e=!1);var f=[JSON.stringify(this.$6.getFeedTracking())];e=e||!b?f:this.$66(a);return c("XTahoeAsyncController").getURIBuilder().setFBID("id",a).setString("originalmediaid",this.$14).setEnum("playerorigin",this.$30).setString("playersuborigin",this.$31).setString("videolistid",this.$29).setString("sponsoreddata",d).setString("externallogid",this.$6.getExternalLogID()).setEnum("reactionvideochanneltype",this.$6.getReactionVideoChannelType()).setString("reactionvideochannelsubtype",this.$6.getReactionVideoChannelSubtype()).setEnum("upstreamplayersource",this.$6.getUpstreamPlayerSource()).setBool("ispermalink",this.$6.getIsPermalink()).setStringVector("feedtracking",e).setInt("numcopyrightmatchedvideoplayedconsecutively",this.$6.getNumCopyrightMatchedVideosPlayedConsecutively())};b.$60=function(a){var b=this.$6.getUserID();if(b)return d("ActorURI").create(a.getURI(),b);else return a.getURI()};b.$54=function(){d("CSS").show(this.$22),d("CSS").hide(this.$23),d("CSS").removeClass(this.$6.getContent(),"_-pb")};b.$55=function(){d("CSS").show(this.$23),d("CSS").hide(this.$22),d("CSS").addClass(this.$6.getContent(),"_-pb")};b.$51=function(a,b,c){a=d("DOMQuery").scry(a,"a")[0];a?(this.$2=a.getAttribute("href"),b&&b()):c&&c()};b.setUpNextChainingInfoFromReactElement=function(a){var b=this;this.$51(a,function(){c("TimeSlice").guard(b.$52.bind(b),"Tahoe preload next video",{propagationType:c("TimeSlice").PropagationType.ORPHAN})()},function(){return b.selectCommentTab()})};b.$57=function(a,b,e){var f=this,g=c("ge")(q+a);if(g){var h=g.parentNode,i=Array.from(h.children);i.some(function(b){if(b.id!==q+a){c("DOM").remove(b);return!1}else return!0});c("DOM").remove(h.firstChild);c("DOM").appendContent(this.$15,h);if(h.children.length>=10){this.$67(Array.from(h.children));this.$26=!0;return null}}else!g&&a!==this.$14&&(this.$6.resetChannelData(),this.$4=null,b=null,e=null);i=c("XTahoeUpNextAsyncController").getURIBuilder().setFBID("media_id",a).setFBIDSet("viewed_videos",Array.from(this.$32)).setString("channel_id",b).setEnum("caller",e).setString("cursor",this.$4).setString("search_keywords",this.$6.getSearchKeywordsForVideoChaining()).setBool("ispermalink",this.$6.getIsPermalink());return new(c("AsyncRequest"))(i.getURI()).setHandler(function(a){a=a.getPayload();f.$4=a.chainingCursor;a.viewportTrackingConfig&&(f.$33=a.viewportTrackingConfig);a=c("HTML").replaceJSONWrapper(a.upNextUnit.markup);f.$26=!0;var b=d("DOMQuery").scry(f.$18,"._3dj6"),e=d("DOMQuery").scry(f.$15,"._3dj7");if(e[0]){c("DOM").appendContent(f.$15,a);e=d("DOMQuery").scry(f.$15,"._3dj7");var g=Array.from(e[1].children);g.forEach(function(a){c("DOM").appendContent(e[0],a)});c("DOM").remove(e[1]);a=e[0];var h={};Array.from(a.children).forEach(function(a){h[a.id]?c("DOM").remove(a):h[a.id]=!0});c("DOM").remove(e[0])}g=null;if(b[0]){b=d("CSS").removeClass(b[0],"_3dj6");c("DOM").setContent(b,a);var i=d("DOMQuery").scry(f.$18,"._8fyn"),k=d("DOMQuery").scry(f.$18,"._bne");if(i.length>0&&k.length>t){i=c("DOM").create("div",{className:"_8fym"});d("ReactDOM").render(j.jsx(c("TahoeUpNextWatchEntryPoint.react"),{sidepaneElement:f.$41()}),i,"TahoeVideoView.js");c("DOM").appendContent(b,i)}f.$26=!1;g=b}else c("DOM").appendContent(f.$15,a),g=f.$15;e=d("DOMQuery").scry(g,"._3dj7");e[0]&&f.$67(Array.from(e[0].children));k=d("DOMQuery").scry(f.$18,"._bne");k.childNodes&&k.childNodes[0]&&f.$51(k.childNodes[0],function(){c("TimeSlice").guard(f.$52.bind(f),"Tahoe preload next video",{propagationType:c("TimeSlice").PropagationType.ORPHAN})()},function(){return f.selectCommentTab()})})};b.$59=function(a){var b=this;new(c("AsyncRequest"))(a).setHandler(function(a){a=a.getPayload();var d=a.video,e=a.autoplayAllowed;a=a.trackingData;b.$63(c("HTML").replaceJSONWrapper(d&&d.markup),e,a)}).send()};b.$61=function(a,b){var d=this;new(c("AsyncRequest"))(a).setHandler(function(a){a=a.getPayload();var e=a.ufiTray,f=a.infoBottomPane,g=a.sidePane;d.$53(e,f);d.$65(c("HTML").replaceJSONWrapper(g&&g.markup),c("HTML").replaceJSONWrapper(f&&f.markup),c("HTML").replaceJSONWrapper(e&&e.markup),b);d.$62(a)}).send()};b.$48=function(a){var b=this;return a.map(function(a){return a.id&&a.id.substring(q.length)}).filter(function(a){return b.$68(a)})};b.$68=function(a){return!a?!1:m.test(a)};b.$42=function(){var a=this.$6.getMediaController();if(a==null||!a.isLiveVideo())return;a=d("DOMQuery").scry(this.$6.getContent(),"._170l");if(!a.length)return;this.$12&&c("DOM").remove(this.$12);if(!this.$27||this.$27.length===0)return;return};b.$67=function(a){this.$27=this.$48(a),this.$42()};b.getCurrentVideoHasCopyrightMusicMatch=function(){return this.$8};b.setUpNextVideoIDs=function(a){this.$27=this.$48(a)};b.getUpNextVideoIDs=function(){return this.$27};b.$52=function(){var a=this;if(this.$9)return;var b=new(c("URI"))(this.$2),e=d("VideoPermalinkURI").parse(b);if(e===null)return;var f=e.video_id;if(!f)return;e=b.getQueryData().sp;b=this.$58(f,!0,e).setEnum("payloadtype","all").setBool("preload",!0);e=new(c("AsyncRequest"))(b.getURI()).setHandler(function(b){b=b.getPayload();var e=c("DOM").create("div",{id:"preload-"+f,"class":o});c("DOM").appendContent(e,c("HTML").replaceJSONWrapper(b.video.markup));b.ufiTray&&c("DOM").appendContent(e,c("HTML").replaceJSONWrapper(b.ufiTray.markup));b.infoBottomPane&&c("DOM").appendContent(e,c("HTML").replaceJSONWrapper(b.infoBottomPane.markup));c("DOM").appendContent(e,c("HTML").replaceJSONWrapper(b.sidePane.markup));c("DOM").appendContent(a.$15,e);a.$64(e,b.trackingData);e=typeof b.autoplayAllowed==="boolean"?b.autoplayAllowed:!0;a.$16=b.videoTitle||d("TahoeConstants").DEFAULT_BROWSER_TITLE;a.$6.setAutoplayAllowed(e);a.$8=!!b.hasNearlyCompleteLicensedMusicTag});e.send()};b.$66=function(a){var b=null;a=c("ge")(q+a);a&&a.getAttribute("data-ft")&&(b=['{"ft":'+a.getAttribute("data-ft")+"}"]);return b};b.selectAddComment=function(){var a=d("DOMQuery").scry(this.$18,".UFIAddCommentInput");a[0]&&a[0].click();this.selectCommentTab()};b.selectCommentTab=function(){var a=this.$41();a&&(d("CSS").addClass(a,"_7r9y"),d("CSS").removeClass(a,"_601i"),d("CSS").removeClass(a,"_6yny"),c("Arbiter").inform("TahoeView/selectCommentTab"))};b.selectUpNextTab=function(){var a=this.$41();a&&(d("CSS").addClass(a,"_601i"),d("CSS").removeClass(a,"_7r9y"),d("CSS").removeClass(a,"_6yny"))};b.selectFriendPresenceTab=function(){var a=this.$41();a&&(d("CSS").addClass(a,"_6yny"),d("CSS").removeClass(a,"_601i"))};b.setCommentOverlayActive=function(a){var b=this.$41();if(!b)return;a?d("CSS").addClass(b,"_2l-1"):d("CSS").removeClass(b,"_2l-1")};b.updateView=function(a,b,c,e,f,g){e===void 0&&(e=null);f===void 0&&(f=null);g===void 0&&(g=!1);this.$46();this.$32.add(a);var h=d("DOMQuery").scry(this.$15,"#preload-"+a);h[0]&&this.$17?(this.$56(a,h[0],b,c),this.$69()):(this.$69(),this.$28&&this.$28.cleanup(),this.$24&&this.$24.cleanup(),this.$13&&this.$13.cleanup(),this.$35(a,!0,b,c,e,f,g));this.$43(!1)};b.$69=function(){this.$17=null;var a=d("DOMQuery").scry(this.$15,"."+o);Array.from(a).forEach(function(a){c("DOM").remove(a)})};b.toggleNativeSupportFlyout=function(){var a=d("DOMQuery").scry(this.$18,".UFICommentSupportButton");a.length>0&&(a[0].dispatchEvent(new MouseEvent("mousedown",{bubbles:!0})),a[0].dispatchEvent(new MouseEvent("mouseup",{bubbles:!0})),a[0].click())};b.loadStickerGallery=function(a){var b=this;c("Bootloader").loadModules(["TahoeStickerGallery"],function(c){c.loadStickerGallery(b.$20,a)},"TahoeVideoView")};b.$70=function(a,b){var e=this;this.$10==null?(this.$10=c("DOM").create("div"),c("DOM").prependContent(this.$18,this.$10),c("Bootloader").loadModules(["TahoeWoodhengeSignupViewRenderer"],function(c){c.render(a,b,e.$10,e.$71)},"TahoeVideoView")):this.$10!=null&&d("CSS").show(this.$10)};b.$64=function(a,b){a=d("DOMQuery").scry(a,"._1c_u");a.length>0&&b!=null&&a[0].setAttribute("data-ft",b)};b.getBottomTrayHeight=function(){return this.isRenderingBottomInfoPane()?this.$23&&this.$23.clientHeight:this.$22.clientHeight};b.isRenderingBottomInfoPane=function(){return!d("CSS").shown(this.$22)};b.getLiveAlertSidePaneOverlayNode=function(){return this.$11};b.onExit=function(){this.$1.release(),this.$46(),this.$44()};a.registerCommentLink=function(a){var b=c("Tahoe").get();b&&b.addEvent(c("Event").listen(a,"click",function(){c("Arbiter").inform(d("StreamingReactionsTrayEvents").EnableReactions),c("Arbiter").inform("quiet-mode-off"),b.getView().selectAddComment()}))};a.registerBecomeSupporterLink=function(b,d){var e=c("Tahoe").get();if(e==null)return;var f=e.getView();if(!(f instanceof a))return;var g=e.getMediaController().getMediaID();e.addEvent(c("Event").listen(b,"click",function(){f.$70(d,g)}))};a.registerPendingController=function(a){var b=c("Tahoe").get();b&&a&&(b.updateMedia(a),b.emit("TahoeController/mediaControllerRegistered"))};a.registerPreloadController=function(a){var b=c("Tahoe").get();b&&(b.getView().$17=a)};a.registerSidepaneTabbar=function(b){var d=c("Tahoe").get();if(d!=null){var e=d.getView();e instanceof a&&b.subscribe(c("TabBar").TAB_CLICK,function(a,b){switch(b){case"up-next":e.selectUpNextTab();break;case"comments":e.selectCommentTab()}})}};a.registerSupportLink=function(b){var d=c("Tahoe").get();if(d==null)return;var e=d.getView();if(!(e instanceof a))return;e.$21=b;d.addEvent(c("Event").listen(b,"click",function(){e.toggleNativeSupportFlyout()}))};a.registerShowCommentsTabLink=function(a){var b=c("Tahoe").get(),d=b&&b.getView();b&&d&&b.addEvent(c("Event").listen(a,"click",function(){return d.selectCommentTab()}))};a.registerShowMainTabLink=function(a){var b=c("Tahoe").get(),d=b&&b.getView();b&&d&&b.addEvent(c("Event").listen(a,"click",function(){return d.selectUpNextTab()}))};a.registerShowFriendPresenceTabLink=function(a,b,d,e,f,g){var h=c("Tahoe").get(),i=h&&h.getView(),j=function(){i&&i.selectFriendPresenceTab(),c("VodPncSeeAllReactionsClickFalcoEvent").log(function(){return{video_id:b,number_of_friends:d,friend_presence_type_first:e,friend_presence_type_second:f,friend_presence_type_third:g}})};h&&i&&h.addEvent(c("Event").listen(a,"click",j))};a.loadView=function(b,c,d,e){return new a(b,c,d,e)};return a}();g["default"]=a}),98);